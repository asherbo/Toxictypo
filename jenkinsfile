
  pipeline{
  agent any

    triggers {
        gitlab(
            triggerOnPush: true, 
            triggerOnMergeRequest: true,
            branchFilterType: 'All',
            addVoteOnMergeRequest: true)
    }

      tools {
        maven 'maven-3.6.3'
    }

    
    stages{

     stage("build"){
        steps{
            script{
                sh 'mvn verify'
                sh 'docker build --tag=toxictypoapp .'
                sh 'docker run -d --network host-compose --name=toxic -p 8085:8080 toxictypoapp'
                }
            }
        }
     }
 }
