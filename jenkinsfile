pipeline{
  agent any

      tools {
        maven 'maven-3.6.2'
    }

    stages{
     stage("build"){
        steps{
            script{
                sh 'mvn verify'
                sh 'docker build --tag=toxictypoapp .'
                sh 'docker run -d --network host-compose --name=toxic -p 8085:8080 toxictypoapp'
                }
            }
        }

     post { 
        always { 
            sh 'docker rm -f toxic || true'
        }

       }

    }
